---
import { SITE } from '@/consts'
---
{ SITE.clarityID && (
	<script
		is:inline
		define:vars={{ CLARITY_ID: SITE.clarityID }}
		type="text/plain"
		data-category="!analytics"
		data-service="Clarity"
	>
		function initClarity() {
			;(function (c, l, a, r, i, t, y) {
				c[a] =
					c[a] ||
					function () {
						;(c[a].q = c[a].q || []).push(arguments)
					}
				t = l.createElement(r)
				t.async = 1
				t.src = 'https://www.clarity.ms/tag/' + i
				y = l.getElementsByTagName(r)[0]
				y.parentNode.insertBefore(t, y)
			})(window, document, 'clarity', 'script', CLARITY_ID)

			console.log('Clarity initialized with ID:', CLARITY_ID)
		}
		document.addEventListener('astro:page-load', initClarity)
		{/* document.addEventListener('astro:after-swap', initClarity) */}
	</script>
)}
